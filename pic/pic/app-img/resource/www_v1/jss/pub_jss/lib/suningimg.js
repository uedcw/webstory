define(["jquery"],function(e){var t=function(){var t=e(".show_photo"),n=e(".photos"),r=n.find("li"),i=r.length,s=n.find("ul"),o=68,u=4;return{init:function(){var t=this,a,f,l=0;s.css("width",i*o),n.prev("a").click(function(e){if(l<=0)return!1;l--,t.scroll(l),e.preventDefault()}),n.next("a").click(function(e){var n=parseInt(i/u);if(l>=n||i<=u||i%u==0&&l==n-1)return!1;l++,t.scroll(l),e.preventDefault()}),r.each(function(n){e(this).find("a").click(function(e){c=n,t.addbk(n),t.loadimg(n),e.preventDefault()})});var c=0;e(document).keyup(function(e){var e=e||window.event;e.which==39?(c++,c>=i&&(c=0,s.stop().animate({marginLeft:0},300)),t.next(c)):e.which==37&&(c--,c<0&&(c=i-1,s.stop().animate({marginLeft:-o*parseInt(c/u)*u},300)),t.prev(c))})},loadimg:function(e){t.html('<div class="loading"></div>');var n=r.eq(e).find("img"),i=n.attr("src"),i=n.attr("src"),s=n.attr("big_src");t.html('<img id="listimg_0" src = '+s+"  />").find("img").hide(),t.find("img").fadeIn(250)},addbk:function(e){r.eq(e).find("a").addClass("on").parent().siblings().find("a").removeClass("on")},scroll:function(e){s.stop().animate({marginLeft:-o*u*e},300)},next:function(e){var t=this;e%u==0&&s.stop().animate({marginLeft:-o*e},300),t.addbk(e),setTimeout(function(){t.loadimg(e)},400)},prev:function(e){var t=this;(e+1)%u==0&&s.stop().animate({marginLeft:-o*parseInt(e/u)*u},300),t.addbk(e),setTimeout(function(){t.loadimg(e)},400)}}};return t()});